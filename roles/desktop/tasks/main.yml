---

- name: Install workstation GUI apps and related dependencies
  dnf:
    name: "{{ item }}"
    state: present
  become: yes
  with_items:
    - adobe-source-code-pro-fonts
    - mozilla-fira-mono-fonts
    - mozilla-fira-sans-fonts
    - gnome-tweak-tool
    - gimp
    - firefox
    - virt-viewer
    - virt-manager
    - fuse-exfat
    - mpv
  when: is_fedora

- name: Install workstation GUI apps and related dependencies
  yum:
    name: "{{ item }}"
    state: present
  become: yes
  with_items:
    - adobe-source-code-pro-fonts
    - mozilla-fira-mono-fonts
    - mozilla-fira-sans-fonts
    - gnome-tweak-tool
    - gimp
    - firefox
    - virt-viewer
    - virt-manager
    - fuse-exfat
    - mpv
  when: is_rhel

- name: Install workstation CLI tools
  become: yes
  dnf:
    name: "{{ item }}"
    state: present
  with_items:
    - youtube-dl
    - pass
    - powertop
    - ffmpeg
  when: is_fedora

- name: Install workstation CLI tools
  become: yes
  yum:
    name: "{{ item }}"
    state: present
  with_items:
    - youtube-dl
    - pass
    - powertop
    - ffmpeg
  when: is_rhel

- import_tasks: lollypop.yml
- import_tasks: sublime.yml
- import_tasks: chrome.yml


# ------------------------------------------------------------------------------
# Direct RPM installations
#
# These all have manual checks for the executable because `yum` will download
# the RPM every time, since it can't know if the version we have install is the
# same as the remote resource).
# ------------------------------------------------------------------------------

- name: Check for Keybase
  command: stat /usr/bin/keybase
  register: has_keybase
  changed_when: no
  failed_when: has_keybase.rc > 1
- name: Install keybase
  yum:
    name: https://prerelease.keybase.io/keybase_amd64.rpm
    state: present
  become: yes
  when: is_rhel and has_keybase.rc == 1
- name: Install keybase
  dnf:
    name: https://prerelease.keybase.io/keybase_amd64.rpm
    state: present
  become: yes
  when: is_fedora and has_keybase.rc == 1

- name: Check for zoom
  command: stat /usr/bin/zoom
  register: has_zoom
  changed_when: no
  failed_when: has_zoom.rc > 1
- name: Install Zoom Meetings Client
  yum:
    name: https://zoom.us/client/latest/zoom_x86_64.rpm
    state: present
  become: yes
  when: is_rhel and has_zoom.rc == 1
- name: Install Zoom Meetings Client
  dnf:
    name: https://zoom.us/client/latest/zoom_x86_64.rpm
    state: present
  become: yes
  when: is_fedora and has_zoom.rc == 1
